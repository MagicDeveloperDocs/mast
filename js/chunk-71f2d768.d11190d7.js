(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f2d768"],{"5fed":function(t,e,a){"use strict";a("6e79")},"6e79":function(t,e,a){},"7cf4":function(t,e,a){},bb16:function(t,e,a){"use strict";a("3cd0"),a("dc09")},dc09:function(t,e,a){},ee7a:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-notify",{staticStyle:{opacity:"0.8"},attrs:{type:"success",background:"#2464f6"},model:{value:t.notify.show,callback:function(e){t.$set(t.notify,"show",e)},expression:"notify.show"}},[a("div",{staticClass:"flex align-center justify-between notify"},[a("a",{staticClass:"link flex align-center justify-between",attrs:{href:t.etherscan,target:"_blank"}},[a("div",{staticClass:"flex align-center left bbo"},[a("van-icon",{staticClass:"right",attrs:{name:"passed"}}),a("span",{staticClass:"ellipsis"},[t._v(" "+t._s(t.notify.tx))])],1),a("van-icon",{staticClass:"right",attrs:{name:"arrow"}})],1)])])],1)},s=[],i=(a("3cd0"),a("1a44"),a("acc2"),a("ad06")),r=(a("1812"),a("5e5e"),a("7cf4"),a("c31d")),o=a("2b0e"),c=a("2638"),u=a.n(c),d=a("d282"),l=a("ba31"),p=a("6605"),v=a("e41f"),f=Object(d["a"])("notify"),m=f[0],h=f[1];function b(t,e,a,n){var s={color:e.color,background:e.background};return t(v["a"],u()([{attrs:{value:e.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:s,class:[h([e.type]),e.className]},Object(l["a"])(n,!0)]),[(null==a.default?void 0:a.default())||e.message])}b.props=Object(r["a"])({},p["b"],{color:String,message:[Number,String],duration:[Number,String],className:null,background:String,getContainer:[String,Function],type:{type:String,default:"danger"}});var y,g,w=m(b),_=a("a142");function x(t){return Object(_["e"])(t)?t:{message:t}}function C(t){if(!_["f"])return g||(g=Object(l["b"])(w,{on:{click:function(t){g.onClick&&g.onClick(t)},close:function(){g.onClose&&g.onClose()},opened:function(){g.onOpened&&g.onOpened()}}})),t=Object(r["a"])({},C.currentOptions,x(t)),Object(r["a"])(g,t),clearTimeout(y),t.duration&&t.duration>0&&(y=setTimeout(C.clear,t.duration)),g}function O(){return{type:"danger",value:!0,message:"",color:void 0,background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}C.clear=function(){g&&(g.value=!1)},C.currentOptions=O(),C.setDefaultOptions=function(t){Object(r["a"])(C.currentOptions,t)},C.resetDefaultOptions=function(){C.currentOptions=O()},C.install=function(){o["a"].use(w)},C.Component=w,o["a"].prototype.$notify=C;var k=C,S=a("365c"),$={name:"notify",components:{"van-notify":k.Component,"van-icon":i["a"]},computed:{etherscan:function(){return S["a"].goEtherscanTx(this.notify.tx)}},data:function(){return{notify:{show:!1,tx:""}}},methods:{show:function(t){var e=this;this.notify.tx=t,this.notify.show=!0,setTimeout((function(){e.notify.show=!1}),5e3)}}},A=$,j=(a("5fed"),a("2877")),B=Object(j["a"])(A,n,s,!1,null,"7ca36873",null);e["a"]=B.exports},f240:function(t,e,a){"use strict";var n=a("d282"),s="van-hairline",i=Object(n["a"])("pagination"),r=i[0],o=i[1],c=i[2];function u(t,e,a){return{number:t,text:e,active:a}}e["a"]=r({props:{prevText:String,nextText:String,forceEllipses:Boolean,mode:{type:String,default:"multi"},value:{type:Number,default:0},pageCount:{type:[Number,String],default:0},totalItems:{type:[Number,String],default:0},itemsPerPage:{type:[Number,String],default:10},showPageSize:{type:[Number,String],default:5}},computed:{count:function(){var t=this.pageCount||Math.ceil(this.totalItems/this.itemsPerPage);return Math.max(1,t)},pages:function(){var t=[],e=this.count,a=+this.showPageSize;if("multi"!==this.mode)return t;var n=1,s=e,i=a<e;i&&(n=Math.max(this.value-Math.floor(a/2),1),s=n+a-1,s>e&&(s=e,n=s-a+1));for(var r=n;r<=s;r++){var o=u(r,r,r===this.value);t.push(o)}if(i&&a>0&&this.forceEllipses){if(n>1){var c=u(n-1,"...",!1);t.unshift(c)}if(s<e){var d=u(s+1,"...",!1);t.push(d)}}return t}},watch:{value:{handler:function(t){this.select(t||this.value)},immediate:!0}},methods:{select:function(t,e){t=Math.min(this.count,Math.max(1,t)),this.value!==t&&(this.$emit("input",t),e&&this.$emit("change",t))}},render:function(){var t,e,a=this,n=arguments[0],i=this.value,r="multi"!==this.mode,u=function(t){return function(){a.select(t,!0)}};return n("ul",{class:o({simple:r})},[n("li",{class:[o("item",{disabled:1===i}),o("prev"),s],on:{click:u(i-1)}},[(null!=(t=this.slots("prev-text"))?t:this.prevText)||c("prev")]),this.pages.map((function(t){var e;return n("li",{class:[o("item",{active:t.active}),o("page"),s],on:{click:u(t.number)}},[null!=(e=a.slots("page",t))?e:t.text])})),r&&n("li",{class:o("page-desc")},[this.slots("pageDesc")||i+"/"+this.count]),n("li",{class:[o("item",{disabled:i===this.count}),o("next"),s],on:{click:u(i+1)}},[(null!=(e=this.slots("next-text"))?e:this.nextText)||c("next")])])}})},f7b1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"farms"},[a("notify",{ref:"notify"}),a("div",{staticClass:"main"},[a("div",{staticClass:"farms-banner center"},[a("div",{staticClass:"farms-banner-cont"},[a("h5",[t._v(t._s(t.$t("铸造 BASS LP")))]),a("p")])]),a("div",{staticClass:"farms-cont"},[a("div",{staticClass:"farms-current"},[a("a",{staticClass:"farms-back",on:{click:function(e){return t.$router.back()}}},[a("i",{staticClass:"ico ico-alone-left"}),t._v(t._s(t.$t("返回")))]),a("div",{staticClass:"farms-current-tab"},[a("a",{staticClass:"btn",class:["stake"===t.type?"active":""],on:{click:function(e){t.type="stake"}}},[t._v(t._s(t.$t("添加"))+" "),a("shadow")]),a("a",{staticClass:"btn",class:["withdraw"===t.type?"active":""],on:{click:function(e){t.type="withdraw"}}},[t._v(t._s(t.$t("移除"))+" "),a("shadow")])]),"stake"===t.type?a("div",{staticClass:"farms-main"},[a("div",{staticClass:"farms-balance"},[a("span",[t._v(t._s(t.$t("BASS 余额")))]),a("b",[a("em",[t._v(t._s(t.bass.amount))]),t._v("BASS")])]),a("div",{staticClass:"farms-form"},[a("i",{staticClass:"ico-ico-bass"}),a("input",{attrs:{type:"text"},domProps:{value:t.add.baseAmount},on:{input:t.addBaseInput}}),a("cite"),a("a",{staticClass:"btn btn-empty",on:{click:function(e){return t.addUpdate("base",t.bass.amount,"0")}}},[t._v(t._s(t.$t("最大")))])]),a("div",{staticClass:"farms-balance"},[a("span",[t._v(t._s(t.$t("USDT 余额")))]),a("b",[a("em",[t._v(t._s(t.usdt.amount))]),t._v("USDT")])]),a("div",{staticClass:"farms-form"},[a("i",{staticClass:"ico-ico-usdt"}),a("input",{attrs:{type:"text"},domProps:{value:t.add.quoteAmount},on:{input:t.addQuoteInput}}),a("cite"),a("a",{staticClass:"btn btn-empty",on:{click:function(e){return t.addUpdate("quote","0",t.usdt.amount)}}},[t._v(t._s(t.$t("最大")))])]),a("div",{staticClass:"farms-balance"},[a("span",[t._v("BASS/USDT")]),a("b",[a("em",[t._v(t._s(t._f("toFixed")(t.add.baseAmount/t.add.quoteAmount,8)))])])]),a("div",{staticClass:"farms-balance",staticStyle:{"margin-top":"10px"}},[a("span",[t._v("USDT/BASS")]),a("b",[a("em",[t._v(t._s(t._f("toFixed")(t.add.quoteAmount/t.add.baseAmount,8)))])])]),t.bass.showApprove||t.usdt.showApprove?t._e():a("a",{staticClass:"btn",on:{click:t.addLp}},[t._v(t._s(t.$t("添加流动性"))+" "),a("shadow")]),t.bass.showApprove?a("a",{staticClass:"btn",on:{click:function(e){return t.approve("bass","addLiquidity")}}},[t._v(t._s(t.$t("授权BASS"))+" "),a("shadow")]):t._e(),t.usdt.showApprove?a("a",{staticClass:"btn",on:{click:function(e){return t.approve("usdt","addLiquidity")}}},[t._v(t._s(t.$t("授权USDT"))+" "),a("shadow")]):t._e()]):t._e(),"withdraw"===t.type?a("div",{staticClass:"farms-main"},[a("div",{staticClass:"farms-balance"},[a("span",[t._v("LP 余额")]),a("b",[a("em",[t._v(t._s(t.lp.amount))]),t._v("BASS-USDT-LP")])]),a("div",{staticClass:"farms-form"},[a("em",{staticClass:"ico-ico-bass"}),a("i",{staticClass:"ico-ico-usdt"}),a("input",{attrs:{type:"text"},domProps:{value:t.remove.amount},on:{input:t.removeInput}}),a("cite"),a("a",{staticClass:"btn btn-empty",on:{click:function(e){return t.removeUpdate(t.lp.amount)}}},[t._v(t._s(t.$t("最大")))])]),a("div",{staticClass:"farms-balance"},[a("span",[t._v(t._s(t.$t("预计获得"))+" USDT")]),a("b",[a("em",[t._v(t._s(t.remove.usdt))])])]),a("div",{staticClass:"farms-balance",staticStyle:{"margin-top":"10px"}},[a("span",[t._v(t._s(t.$t("预计获得"))+" BASS")]),a("b",[a("em",[t._v(t._s(t.remove.bass))])])]),t.lp.showApprove?t._e():a("a",{staticClass:"btn",on:{click:t.removeLiquidity}},[t._v(t._s(t.$t("移除流动性"))+" "),a("shadow")]),t.lp.showApprove?a("a",{staticClass:"btn",on:{click:function(e){return t.approve("lpTokens['BASS-USDT-LP']","addLiquidity")}}},[t._v(t._s(t.$t("授权LP"))+" "),a("shadow")]):t._e()]):t._e()])])])],1)},s=[],i=a("c7eb"),r=a("1da1"),o=a("ade3"),c=(a("bb16"),a("f240")),u=(a("d9e2"),a("b680"),a("ee7a")),d=a("ed08"),l=a("901e"),p=a.n(l),v=a("2ef0"),f=a.n(v),m={name:"lp",computed:{},components:{Notify:u["a"],Pagination:c["a"]},watch:Object(o["a"])({},"$store.state.walletAddress",(function(){this.init()})),data:function(){return{type:"stake",add:{input:"base",baseAmount:"",quoteAmount:""},totalSupply:"0",getReserves:{reserveA:"0",reserveB:"0"},remove:{amount:"",usdt:"",bass:""},bass:{amount:"0",showApprove:"0"},usdt:{amount:"0",showApprove:"0"},lp:{amount:"0",showApprove:"0"}}},methods:{addQuery:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,n,s,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$api.getConnect(),"base"!==t.add.input){e.next=10;break}if(Object(d["c"])(t.add.baseAmount)){e.next=4;break}throw new Error(t.$t("请输入 BASS 数量"));case 4:return s=new p.a(t.add.baseAmount).multipliedBy(1e18).multipliedBy(t.getReserves.reserveB).div(t.getReserves.reserveA).div(1e18).multipliedBy("1.1").toFixed(18,p.a.ROUND_DOWN),e.next=7,a.addLiquidity().preAddLiquidity(t.add.baseAmount,s);case 7:n=e.sent,e.next=16;break;case 10:if(Object(d["c"])(t.add.quoteAmount)){e.next=12;break}throw new Error(t.$t("请输 USDT 数量"));case 12:return r=new p.a(t.add.quoteAmount).multipliedBy(1e18).multipliedBy(t.getReserves.reserveA).div(t.getReserves.reserveB).div(1e18).multipliedBy("1.1").toFixed(18,p.a.ROUND_DOWN),e.next=15,a.addLiquidity().preAddLiquidity(r,t.add.quoteAmount);case 15:n=e.sent;case 16:return e.abrupt("return",{amountA:n.amountA,amountB:n.amountB});case 17:case"end":return e.stop()}}),e)})))()},onUpdateAdd:f.a.debounce(Object(r["a"])(Object(i["a"])().mark((function t(){var e;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.addQuery();case 2:e=t.sent,this.add.baseAmount=e.amountA,this.add.quoteAmount=e.amountB;case 5:case"end":return t.stop()}}),t,this)}))),1e3),addUpdate:function(t,e,a){Object(d["c"])(e,!0)&&Object(d["c"])(a,!0)&&(this.add.input=t,this.add.baseAmount=e,this.add.quoteAmount=a,this.onUpdateAdd())},removeUpdate:function(t){Object(d["c"])(t,!0)&&(this.remove.amount=t,this.remove.bass=new p.a(t).div(this.totalSupply).multipliedBy(this.getReserves.reserveA).div(1e18).toFixed(18,p.a.ROUND_DOWN),this.remove.usdt=new p.a(t).div(this.totalSupply).multipliedBy(this.getReserves.reserveB).div(1e18).toFixed(18,p.a.ROUND_DOWN))},removeInput:function(t){var e=t.target.value;this.removeUpdate(e)},addBaseInput:function(t){var e=this;return Object(r["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.target.value,e.addUpdate("base",n,"0");case 2:case"end":return a.stop()}}),a)})))()},addQuoteInput:function(t){var e=this;return Object(r["a"])(Object(i["a"])().mark((function a(){var n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=t.target.value,e.addUpdate("quote","0",n);case 2:case"end":return a.stop()}}),a)})))()},removeLiquidity:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading.show(),e.prev=1,a=t.$api.getConnect(),e.next=5,a.addLiquidity().removeLiquidity(t.remove.amount);case 5:return n=e.sent,t.$refs.notify.show(n.getHash()),e.next=9,n.confirm();case 9:return t.$toast(t.$t("操作成功")),e.next=12,t.init();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](1),t.$toast(e.t0.message);case 17:return e.prev=17,t.$loading.hide(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})))()},addLp:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,n,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$loading.show(),e.prev=1,a=t.$api.getConnect(),e.next=5,t.addQuery();case 5:return n=e.sent,e.next=8,a.addLiquidity().addLiquidity(n.amountA,n.amountB);case 8:return s=e.sent,t.$refs.notify.show(s.getHash()),e.next=12,s.confirm();case 12:return t.$toast(t.$t("操作成功")),e.next=15,t.init();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),t.$toast(e.t0.message);case 20:return e.prev=20,t.$loading.hide(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[1,17,20,23]])})))()},approve:function(t,e){var a=this;return Object(r["a"])(Object(i["a"])().mark((function n(){var s,r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.$loading.show(),n.prev=1,s=a.$api.getConnect(),t=f.a.get(s.addressInfo,t),e=f.a.get(s.addressInfo,e),n.next=9,s.erc20().approve(e,t);case 9:return r=n.sent,a.$refs.notify.show(r.getHash()),n.next=13,r.confirm();case 13:return a.$toast(a.$t("授权成功")),n.next=16,a.init();case 16:n.next=21;break;case 18:n.prev=18,n.t0=n["catch"](1),a.$toast(n.t0.message);case 21:return n.prev=21,a.$loading.hide(),n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[1,18,21,24]])})))()},init:function(){var t=arguments,e=this;return Object(r["a"])(Object(i["a"])().mark((function a(){var n,s,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=!(t.length>0&&void 0!==t[0])||t[0],!e.$store.state.walletConnect){a.next=18;break}return a.prev=2,n&&e.$loading.show(),s=e.$api.getConnect(),a.next=7,s.addLiquidity().info();case 7:r=a.sent,e.bass=r.bass,e.usdt=r.usdt,e.lp=r.lp,e.getReserves=r.getReserves,e.totalSupply=r.totalSupply;case 13:return a.prev=13,n&&e.$loading.hide(),a.finish(13);case 16:a.next=18;break;case 18:case"end":return a.stop()}}),a,null,[[2,,13,16]])})))()}},created:function(){this.init()},destroyed:function(){}},h=m,b=a("2877"),y=Object(b["a"])(h,n,s,!1,null,"353aff19",null);e["default"]=y.exports}}]);